.container-fluid
  .row-fluid
    .col-md-12
      .col-md-4.pull-right
        = form_tag(controller: "fax_records", method: 'post') do
          .col-md-5.col-lg-offset-5
            = text_field_tag :search_value, "#{ @search_value.present? ? @search_value : '' }" , placeholder: "Search for..." , class: 'form-control'
          .col-md-1
            = submit_tag "Filter!", class: 'btn btn-default'
      .col-lg-4.pull-left
        %p
          = "Showing #{@per_page * @current_page - @per_page + 1} to #{@total_record < @per_page ? @total_record : (@fax_records.size < @per_page ? @total_record : @current_page * @per_page)} of #{@total_record} entries"
      .col-md-4
        Export the results as:
        \#{link_to 'CSV file' , export_fax_records_path(format: 'csv'), method: :post, class: 'btn btn-default btn-sm'}
        \#{link_to 'Excel file', export_fax_records_path(format: 'xls'), method: :post, class: 'btn btn-default btn-sm'}
  .row-fluid
    %table.table.table-striped.table-bordered.table-condensed.table-responsive
      %thead#fax_record_thead
        %tr
          %th.text-center Fax ID
          %th.text-center Recipient name
          %th.text-center Recipient number
          %th.text-center File(s) name
          %th.text-center Confirmation Message
          %th.text-center Status
          %th.text-center Attempts
          %th.text-center Pages
          %th.text-center Sender No.
          %th.text-center Request Initiated
          %th.text-center Request Sent to Vendor
          %th.text-center Vendor Confirmation
          %th.text-center Duration sec
      %tbody
        - @fax_records.each do |fax_record|
          %tr
            %td
              = fax_record.id
            %td
              = fax_record.recipient_name
            %td
              = number_to_phone(fax_record.number_to_fax)
            %td
              = fax_record.file_path
            %td
              = fax_record.message
            %td
              = fax_record.result_message
            %td
              = fax_record.attempts
            %td
              = fax_record.pages
            %td
              = fax_record.sender_fax
            %td
              = fax_record.created_at.in_time_zone(@zone).strftime("%m/%d/%Y %I:%m %p")
            %td
              = fax_record.client_receipt_date.in_time_zone(@zone).strftime("%m/%d/%Y %I:%m %p")
            %td
              = fax_record.send_confirm_date.in_time_zone(@zone).strftime("%m/%d/%Y %I:%m %p") if fax_record.send_confirm_date?
            %td
              = (fax_record.fax_duration.round(2) * 100).to_i if fax_record.fax_duration.present?
  .row-fluid
    .col-md-12.text-right
      - unless @current_page.nil?
        - unless @current_page  < 2
          = link_to '<< Previous page', fax_records_path(page: @current_page - 1, search_value: @search_value), class: 'btn btn-primary btn-sm paginate'
        - unless @current_page >= @total_pages
          = link_to 'Next page >>', fax_records_path(page: @current_page + 1, search_value: @search_value), class: 'btn btn-primary btn-sm paginate'
